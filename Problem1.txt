BEGIN TRANSACTION;

drop TABLE User;
drop TABLE Borrower;
drop TABLE Lender;
drop TABLE Intermediary; 
drop TABLE Loan;
drop TABLE Trust;
drop TABLE Deadline;
drop TABLE Repayment;
drop TABLE LoanRequest;
drop TABLE Commitment;
drop TABLE IsA;
drop TABLE requests;

CREATE TABLE User(
  userId CHAR(16) PRIMARY KEY NOT NULL,
  name CHAR(64),
  address CHAR(64)
);

CREATE TABLE Borrower(
  userIdBorrower CHAR(16),
  FOREIGN KEY userId REFERENCES IsA
);

CREATE TABLE Lender(
  userIdLender CHAR(16),
  FOREIGN KEY userId REFERENCES IsA
);

CREATE TABLE Intermediary(
  userIdInter CHAR(16),
  FOREIGN KEY userId REFERENCES IsA
);

CREATE TABLE Loan(
  loanDate DATE PRIMARY KEY,
  requestDate DATE,
  userIdInter CHAR(16),
  FOREIGN KEY requestDate REFERENCES LoanRequest
  FOREIGN KEY userIdInter REFERENCES Intermediary
);

CREATE TABLE Trust(
  userIdBorrower CHAR(16),
  value INT PRIMARY KEY,
  FOREIGN KEY userIdBorrower REFERENCES Borrower
);

CREATE TABLE Deadline(
  deadline DATE,
  finalDate DATE PRIMARY KEY NOT NULL,
  date DATE,
  FOREIGN KEY date REFERENCES Loan
);

CREATE TABLE Repayment(

);

CREATE TABLE LoanRequest(
  requestDate DATE PRIMARY_KEY,
  deadline DATE,
  payDate DATE,
  amount DOUBLE,
  description CHAR(128),
  userIdBorrower CHAR(16),
  FOREIGN KEY userIdBorrower REFERENCES requests
 

);

CREATE TABLE Commitment(

);


CREATE TABLE IsA(
  userId CHAR(16),
  FOREIGN KEY userId REFERENCES User
);

CREATE TABLE requests(
  value INT PRIMARY KEY,
  userIdBorrower CHAR(16),
  userIdLender CHAR(16),
  FOREIGN KEY userIdBorrower REFERENCES Borrower,
  FOREIGN KEY userIdLender REFERENCES Lender
);




COMMIT;



